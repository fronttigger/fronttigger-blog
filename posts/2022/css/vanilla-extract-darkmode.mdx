---
title: ë¸”ë¡œê·¸ì— ë‹¤í¬ëª¨ë“œë¥¼ ë¼ì–¹ì–´ë³´ì (feat. vanilla-extract css) #required
tags:
  - vanilla-extract
  - darkmode
  - CSS
  - Next.js
published: true # required
date: '2022. 2. 17' # required
description: 'ì°¸ ì‹ ë°•í•˜ë„¤' # required
thumbnailImg: '/thumbnail/2022/02/css/vanill-extract-darkmode.png' # required
---

## vanilla-extract..?

2022ë…„ ìƒˆí•´ ì‚¬ì´ë“œí”„ë¡œì íŠ¸ë¡œ ê°œì¸ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê²Œ ë˜ë©´ì„œ CSS ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì–´ë–¤ê±¸ ì‚¬ìš©í•´ì•¼í• ì§€ ê³ ë¯¼ì„ í–ˆë‹¤. ğŸ¤”

ê¸°ì¡´ì— ê³„ì† ì‚¬ìš©í•˜ê³  ìˆë˜ styled-componenetsë¥¼ ì´ìš©í• ì§€, ì•„ë‹ˆë©´ ìƒˆë¡œìš´ê±¸ ì‚¬ìš©í•´ë³¼ì§€ ê°ˆíŒ¡ì§ˆíŒ¡ í•˜ë˜ ë„ì¤‘ ìš°ì—°ì¹˜ ì•Šê²Œ 2021ë…„ë„ì˜ CSSë“¤ì„ ì¢…í•©í•´ í†µê³„ë‚¸ [ì•„í‹°í´](https://2021.stateofcss.com/en-US/technologies/css-in-js)ì„ ë³´ê²Œ ë˜ì—ˆëŠ”ë° ì—¬ê¸°ì„œ 2021ë…„ì— í˜œì„±ê°™ì´ ë“±ì¥í•œ [vanilla-extract](https://vanilla-extract.style/) ë¼ëŠ” ì¹œêµ¬ê°€ ëˆˆì— ë“¤ì–´ì™”ë‹¤.

ë‹¤ë¥¸ê±´ ë‘˜ì§¸ì¹˜ê³  **ë§Œì¡±ë„**ê°€ ë†’ë‹¤ëŠ” í†µê³„ë¥¼ ë³´ê³  í˜¹í•´ì„œ ê³µì‹ ë¬¸ì„œë¥¼ ì‚´í´ë³´ëŠ” ë„ì¤‘ í˜„ì¬ ê°œë°œí•˜ê³  ìˆëŠ” Next.js í™˜ê²½ê³¼ TS í™˜ê²½ì—ì„œ êµ‰ì¥íˆ ì…‹ì—…ë„ í¸ë¦¬í•˜ê³  í˜¸í™˜ì´ ì¢‹ì•„ë³´ì˜€ê³ , íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ ê¸°ë³¸ì ìœ¼ë¡œ ì§€ì›í•˜ê³  ìˆìœ¼ë©° ì´ë ‡ê²Œ ì‘ì„±ëœ ì½”ë“œëŠ” **Zero-Runtime**ìœ¼ë¡œ ë¹Œë“œ íƒ€ì„ì‹œ ìŠ¤íƒ€ì¼ì„ ë§Œë“¤ì–´ë‚´ëŠ” ë°©ì‹ì´ì—ˆë‹¤. (ë¶€ë¶„ì ìœ¼ë¡œ ëŸ°íƒ€ì„ì—ì„œ ë™ì‘í•˜ê²Œ í•˜ëŠ” ë°©ë²•ë„ ìˆë‹¤.)

ë˜í•œ íŒŒì¼ì€ `*.css.ts` í˜•íƒœë¡œ ë§Œë“¤ì–´ì„œ ì‘ì„±í•˜ëŠ”ë°,
ì´ëŠ” `.ts` í™•ì¥ìë¥¼ `.scss` ì™€ ê°™ì´ ì „ì²˜ë¦¬ê¸°ì˜ ì—­í• ì²˜ëŸ¼ ì‚¬ìš©í•œë‹¤ëŠ” ê²ƒì´ë‹¤.

ì´ëŸ¬í•œ ì¥ì ë“¤ì„ ë³´ë‹ˆ ê°‘ìê¸° ì—„ì²­ë‚œ ëŒë¦¼ì— ë‹¹ê²¨ vanilla-extractë¥¼ ì‚¬ìš©í•´ë³´ê¸°ë¡œ ê²°ì •í•˜ê³  ë‹¤í¬ëª¨ë“œë¥¼ ì§€ì›í•˜ê¸° ìœ„í•œ ì—¬ëŸ¬ê°€ì§€ APIë¥¼ ì‚´í´ë³´ë˜ ì¤‘..
[createThemeContract](https://vanilla-extract.style/documentation/styling-api/#createthemecontract), [createTheme](https://vanilla-extract.style/documentation/styling-api/#createtheme), [style](https://vanilla-extract.style/documentation/styling-api/#style) ì´ ì„¸ ê°€ì§€ APIë¥¼ í™œìš©í•´ ê°œë°œí•  ìˆ˜ ìˆì„ ê²ƒ ê°™ì•˜ë‹¤.

ì´ë¥¼ í™œìš©í•´ ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í•´ë³¸ ê²½í—˜ì„ ê³µìœ í•˜ë ¤ í•œë‹¤. ğŸ“–

## createThemeContract

Contractê°€ **ê³„ì•½**ì´ë¼ëŠ” ëœ»ì„ ê°€ì§€ê³  ìˆëŠ”ë°, ëœ»ì²˜ëŸ¼ ì´ í•¨ìˆ˜ëŠ” í…Œë§ˆë¥¼ ë§Œë“¤ê¸° ìœ„í•œ í•˜ë‚˜ì˜ **í”„ë ˆì„**ê³¼ ê°™ì€ ì—­í• ì„ í•œë‹¤.

`createThemeContract`ë¥¼ ì‚¬ìš©í•˜ì—¬ ë§Œë“¤ì–´ë‚¸ ê°ì²´ëŠ” ìì²´ì ìœ¼ë¡œ íƒ€ì…ì„ ë§Œë“¤ì–´ì£¼ê¸° ë•Œë¬¸ì— ë§Œë“¤ì–´ë‚¸ í‹€ ë‚´ì—ì„œ í…Œë§ˆê°€ ì´ë£¨ì–´ì ¸ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì´ë¥¼ í™œìš©í•˜ì—¬ ë¼ì´íŠ¸ëª¨ë“œ, ë‹¤í¬ëª¨ë“œ ë“± ì •í•´ì§„ í…Œë§ˆë¥¼ ë§Œë“¤ê¸° ì í•©í•˜ë‹¤ê³  íŒë‹¨ë˜ì—ˆë‹¤.

ì–´ë–»ê²Œ êµ¬ì„±ë˜ëŠ”ì§€ ì½”ë“œë¡œ ì‚´í´ë³´ì

```javascript
// theme.css.ts
import { createThemeContract } from '@vanilla-extract/css'

const colors = createThemeContract({
  backgroundColor: null,
  title: null,
  domain: {
    header: {
      color: null,
      backgroundColor: null,
    },
    footer: {
      backgroundColor: null,
      contactColor: null,
      color: null,
    },
    card: {
      title: null,
      description: null,
      date: null,
    },
    detail: {
      title: null,
      date: null,
    },
    icon: {
      color: null,
      backgroundColor: null,
    },
  },
  post: {
    a: null,
    blockquote: {
      color: null,
      borderLeft: null,
    },
    code: {
      color: null,
      backgoundColor: null,
    },
    ol: null,
    ul: {
      color: null,
      backgroundColor: null,
    },
    p: null,
    strong: null,
  },
  // ....
})

export const theme = colors
```

í•¨ìˆ˜ ì¸ìì— ê°ì²´ í˜•íƒœë¡œ ê°ê° ë„ë©”ì¸ì— ë§ëŠ” í”„ë¡œí¼í‹°ë¥¼ ì£¼ì—ˆë‹¤.

ì´ë ‡ê²Œ í•œ ì´ìœ ëŠ” ë¸”ë¡œê·¸ë¡œì„œ ì—„ì²­ í° ê·œëª¨ì˜ ìŠ¤íƒ€ì¼ ë¦¬ì†ŒìŠ¤ê°€ í•„ìš”í•˜ì§€ ì•Šë‹¤ê³  ìƒê°í–ˆê³ , ì •í•´ì§„ ë„ë©”ì¸ì— ë”°ë¼ ìŠ¤íƒ€ì¼ì„ ì£¼ëŠ” ê²ƒì´ ì‹œê°„ì´ ì§€ë‚˜ë”ë¼ë„ ì´í•´í•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ê¸° ë” í¸í•  ê²ƒì´ë¼ ìƒê°í–ˆë‹¤.

ë„ë©”ì¸ë³„ë¡œ í”„ë¡œí¼í‹°ë¥¼ ì£¼ì—ˆëŠ”ë° ê°’ì€ `null`ë¡œ ì´ˆê¸°í™”ë¥¼ ì‹œì¼œì£¼ì—ˆëŠ”ë°, ì´ëŠ” ì•„ê¹Œì˜ ê°œë…ì—ì„œ ë³´ì•˜ë“¯ì´ **í”„ë ˆì„**ì„ ë§Œë“œëŠ” ì—­í• ì„ í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

ì´ë ‡ê²Œ ë§Œë“¤ì–´ë‚¸ ê³µí†µ í”„ë ˆì„ì„ **colors** ë¼ëŠ” ë³€ìˆ˜ì— ë‹´ì•˜ê³  ì´ë¥¼ í™œìš©í•˜ì—¬ íŠ¹ì • í…Œë§ˆì— ëŒ€í•œ ìŠ¤íƒ€ì¼ì„ ë§Œë“¤ ë•Œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.

### createTheme

ì ì´ì œëŠ” ë§Œë“¤ì–´ë‚¸ í‹€ì„ í™œìš©í•˜ì—¬ ê¸°ë³¸ ëª¨ë“œ(ë¼ì´íŠ¸)ì™€ ë‹¤í¬ëª¨ë“œë¥¼ êµ¬í˜„í•  ì°¨ë¡€ê°€ ì™”ë‹¤.

ìœ„ì—ì„œ ë§Œë“  colors ë³€ìˆ˜ë¥¼ createTheme í•¨ìˆ˜ì˜ ì²« ë²ˆì§¸ ì¸ìë¡œ ë„£ê³ , í‹€ì— í•´ë‹¹í•˜ëŠ” ìŠ¤íƒ€ì¼ì„ ë‘ ë²ˆì§¸ ì¸ìì— ê°ì²´í˜•íƒœë¡œ ë„£ìœ¼ë©´ í•˜ë‚˜ì˜ í…Œë§ˆê°€ ì™„ì„±ëœë‹¤.

### lightTheme

```javascript
// theme.css.ts
import { createTheme, createThemeContract } from '@vanilla-extract/css'

export const lightTheme = createTheme(colors, {
  backgroundColor: colorTheme.white,
  title: colorTheme.darkblue,
  domain: {
    header: {
      color: colorTheme.black,
      backgroundColor: colorTheme.white,
    },
    footer: {
      backgroundColor: colorTheme.whiteblue,
      contactColor: colorTheme.graywhite,
      color: colorTheme.bluegreen,
    },
    card: {
      title: colorTheme.black,
      description: colorTheme.darkblue,
      date: colorTheme.gray,
    },
    detail: {
      title: colorTheme.black,
      date: colorTheme.gray,
    },
    icon: {
      color: colorTheme.skyblue,
      backgroundColor: colorTheme.black,
    },
  },
  post: {
    a: colorTheme.lightblue,
    blockquote: {
      color: colorTheme.bluegray,
      borderLeft: colorTheme.lightgray,
    },
    code: {
      color: colorTheme.pink,
      backgoundColor: colorTheme.lightgray,
    },
    ol: colorTheme.bluegray,
    ul: {
      color: colorTheme.bluegray,
      backgroundColor: colorTheme.bluegray,
    },
    p: colorTheme.bluegray,
    strong: colorTheme.darkblue,
  },
  // ...
})
```

### darkTheme

```javascript
// theme.css.ts
import { createTheme, createThemeContract } from '@vanilla-extract/css'

export const darkTheme = createTheme(colors, {
  backgroundColor: colorTheme.mageticdark,
  title: colorTheme.white,
  domain: {
    header: {
      color: colorTheme.white,
      backgroundColor: colorTheme.mageticdark,
    },
    footer: {
      backgroundColor: colorTheme.mageticdark,
      contactColor: colorTheme.bluegray,
      color: colorTheme.lightwhite,
    },
    card: {
      title: colorTheme.lightwhite,
      description: colorTheme.darkwhite,
      date: colorTheme.gray,
    },
    detail: {
      title: colorTheme.white,
      date: colorTheme.gray,
    },
    icon: {
      color: colorTheme.skyblue,
      backgroundColor: colorTheme.graywhite,
    },
  },
  post: {
    a: colorTheme.lightblue,
    blockquote: {
      color: colorTheme.bluegray,
      borderLeft: colorTheme.lightgray,
    },
    code: {
      color: colorTheme.pink,
      backgoundColor: colorTheme.darkgray,
    },
    ol: colorTheme.brightgray,
    ul: {
      color: colorTheme.brightgray,
      backgroundColor: colorTheme.brightgray,
    },
    p: colorTheme.brightgray,
    strong: colorTheme.darkblue,
  },
  // ...
})
```

ìœ„ ë‘ê°œì˜ ì½”ë“œë¥¼ ë³´ë©´ í‹€ì€ ê°™ì§€ë§Œ ë„ë©”ì¸ë³„ë¡œ ë‹¤ë¥¸ ìŠ¤íƒ€ì¼ì„ ê°€ì§€ê³  ìˆë‹¤.

ì´ë ‡ê²Œ ë§Œë“¤ì–´ë‚¸ ë‘ê°œì˜ í…Œë§ˆë¥¼ ì´ì œ ì ìš©í•  ì°¨ë¡€ë§Œ ë‚¨ì•˜ë‹¤.

## style

style í•¨ìˆ˜ëŠ” ë§ ê·¸ëŒ€ë¡œ ìŠ¤íƒ€ì¼ì„ ì •ì˜í•˜ëŠ” í•¨ìˆ˜ì¸ë°, ì—¬ê¸°ì„œ ë§Œë“¤ì–´ë‚¸ styleì€ í•´ë‹¹í•˜ëŠ” Elementì˜ **className**ì— ì„ ì–¸ëœë‹¤.

```javascript
// styles.css.ts
import { style } from '@vanilla-extract/css'

import { theme } from '#shared/theme.css'

export const menuName = style({
  color: theme.colors.domain.header.color,
})

// ...
```

ë§Œë“¤ì–´ë‚¸ í‹€ì„ ê°€ì ¸ì™€ì„œ ì„ ì–¸í•œ ë„ë©”ì¸ì— í•´ë‹¹ë˜ëŠ” ìŠ¤íƒ€ì¼ì„ ë„£ì–´ì£¼ë©´ ë!

ì•„ê¹Œ `createThemeContract`ë¥¼ í™œìš©í•˜ì—¬ ìŠ¤íƒ€ì¼ì— ëŒ€í•œ í”„ë ˆì„ì„ ë§Œë“¤ì–´ ë†“ì•˜ëŠ”ë° ê·¸ í”„ë ˆì„ì„ styleì— ì„ ì–¸í•˜ì˜€ê³ 
ì¶”í›„ ê·¸ í‹€ë¡œ ë§Œë“¤ì–´ë‚¸ í…Œë§ˆë¥¼ **className**ì— ì„ ì–¸í•´ì£¼ë©´ ì´ë¯¸ ë¹Œë“œ íƒ€ì„ì— ë§Œë“¤ì–´ì§„ cssê°€ ì ìš©ëœë‹¤.

### Header.tsx

```javascript
// Header.tsx
import Image from 'next/image'
import Link from 'next/link'
import config from 'config'

import * as styles from './styles.css'
// ..

interface HeaderProps {
  theme: CustomThemeType
  onChangeTheme: () => void
}

export default function Header({ theme, onChangeTheme }: HeaderProps) {
  return (
    // ...
    <ul className={styles.menuContainer}>
      {config.menus.map(({ id, menu, link }) => (
        <li key={id} className={styles.menuTitle}>
          <Link href={link}>
            <span className={styles.menuName}>{menu}</span>
          </Link>
        </li>
      ))}
      <li onClick={onChangeTheme} aria-hidden="true">
        {theme === 'light' ? <SunIcon /> : <MoonIcon />}
      </li>
    </ul>
    // ...
  )
}
```

í—¤ë” ì»´í¬ë„ŒíŠ¸ì— í…Œë§ˆë¥¼ ë³€ê²½í•  propsë“¤ê³¼ ë§Œë“¤ì—ˆë˜ ìŠ¤íƒ€ì¼ë“¤ì„ ì ìš©í–ˆë‹¤.

## ë‹¤í¬ëª¨ë“œ ì ìš©

ì´ì œ ë§ˆì§€ë§‰ ë‹¨ê³„ì¸ í† ê¸€ì„ í†µí•œ ë‹¤í¬ëª¨ë“œ ì ìš©ë§Œ ë‚¨ì•˜ë‹¤.

í˜„ì¬ ë¸”ë¡œê·¸ëŠ” Next.jsë¡œ ê°œë°œí•˜ê³  ìˆëŠ”ë° ì»´í¬ë„ŒíŠ¸ ìµœìƒë‹¨ì— cssë¥¼ ì ìš©ì‹œì¼œì•¼ í•˜ê¸° ë•Œë¬¸ì— `_app.tsx`ì—ì„œ ì ìš©í•˜ì˜€ë‹¤.

```javascript
import { useMemo, useState, useEffect } from 'react'
import { AppProps } from 'next/app'
import Head from 'next/head'
import { RecoilRoot } from 'recoil'

import '#shared/globalStyles.css.ts'
import * as styles from '#shared/styles/pages/posts/styles.css'
import Header from '#components/header'
import Layout from '#components/layout'
import Footer from '#components/footer'
import { lightTheme, darkTheme } from '#shared/theme.css'
import { BLOG_THEME_NAME } from '#constants'

export type CustomThemeType = 'light' | 'dark'

function App({ Component, pageProps }: AppProps) {
  const [theme, setTheme] = useState<CustomThemeType>('light')
  const customTheme = useMemo(() => (theme === 'dark' ? darkTheme : lightTheme), [theme])

  const handleThemeChange = (): void => {
    if (theme === 'light') {
      setTheme('dark')
      localStorage.setItem(BLOG_THEME_NAME, 'dark')
    } else {
      setTheme('light')
      localStorage.setItem(BLOG_THEME_NAME, 'light')
    }
  }

  useEffect((): void => {
    if (!localStorage.getItem(BLOG_THEME_NAME)) {
      localStorage.setItem(BLOG_THEME_NAME, 'light')
    }

    const currentTheme = (localStorage.getItem(BLOG_THEME_NAME) as CustomThemeType) || 'light'

    setTheme(currentTheme)
  }, [])

  return (
    <RecoilRoot>
      <div className={[styles.bodyContainer, customTheme].join(' ')}>
        <Head>
          <meta content="width=device-width, initial-scale=1" name="viewport" />
        </Head>
        <Header theme={theme} onChangeTheme={handleThemeChange} />
        <Layout>
          <Component {...pageProps} />
        </Layout>
        <Footer />
      </div>
    </RecoilRoot>
  )
}

export default App
```

í”„ë ˆì„ì„ í†µí•´ì„œ ë§Œë“¤ì—ˆë˜ ë‘ ê°€ì§€ í…Œë§ˆë¥¼ ê°€ì§€ê³  LocalStorage íŒë³„ê³¼ í† ê¸€ ì´ë²¤íŠ¸ë¥¼ í†µí•´ì„œ ì²˜ë¦¬í•˜ê³  ìˆë‹¤.

**customTheme**ì„ ë§Œë“¤ì–´ themeì´ ë³€ê²½ë  ë•Œ í…Œë§ˆë¥¼ ë³€ê²½í•˜ì—¬ ì ìš©í•˜ì˜€ê³ ,
ì´ë¥¼ ìµœìƒë‹¨ divì— ì„ ì–¸í•˜ì—¬ ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„œ í…Œë§ˆì— í•´ë‹¹ë˜ëŠ” ìŠ¤íƒ€ì¼ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²½ìš° ë°˜ì˜ë˜ë„ë¡ í•˜ì˜€ë‹¤.

ì´ë ‡ê²Œ ì„ ì–¸í•˜ë©´ ê³¼ì—° ìµœì¢…ì ìœ¼ë¡œëŠ” ì–´ë–»ê²Œ cssê°€ ë§Œë“¤ì–´ì ¸ ìˆì„ê¹Œ?

![style tag](/images/2022/02/css/style-tag.png)

![header style tag](/images/2022/02/css/style-tag-header.png)

ë†€ëì§€ ì•Šì€ê°€!! ğŸ¤­

í…Œë§ˆë³„ë¡œ ì´ë¯¸ cssëŠ” ë§Œë“¤ì–´ì ¸ìˆê³ , ê·¸ ìŠ¤íƒ€ì¼ì„ ì ìš©í•˜ê³  ìˆëŠ” ëª¨ìŠµì´ë‹¤.

ì§€ê¸ˆ ë§Œë“¤ì–´ë‚¸ css ë¿ë§Œ ì•„ë‹ˆë¼ ëª¨ë“  ìŠ¤íƒ€ì¼ì´ ë¹Œë“œ íƒ€ì„ì— ë§Œë“¤ì–´ì§€ê¸° ë•Œë¬¸ì— ë¹Œë“œ í›„ `head` íƒœê·¸ ë‚´ë¶€ì˜ `style` íƒœê·¸ë“¤ì„ ë³´ë©´ ì„ ì–¸í•œ ìŠ¤íƒ€ì¼ë“¤ì„ í™•ì¸ ìˆ˜ ìˆë‹¤.

ì´ì œ ì´ë ‡ê²Œ ë§Œë“¤ì–´ì§„ ë‹¤í¬ëª¨ë“œë¥¼ ì‚´í´ë³´ë©´..

![chage theme](/images/2022/02/css/darkmodegif.gif)

ë§Œë“¤ì–´ë‚¸ í…Œë§ˆë¥¼ ì˜ ì ìš©ì‹œí‚¤ê³  ìˆë‹¤! ğŸ‰ğŸ‰

ì´ëŸ° ì»¤ìŠ¤í…€ í…Œë§ˆë¥¼ ì˜ ë§Œë“¤ ìˆ˜ ìˆê²Œë” ì¢‹ì€ APIë“¤ì„ ì œê³µí•˜ê³  ìˆì–´ì„œ êµ¬í˜„í•˜ê¸° í¸í–ˆë‹¤.
í˜„ì¬ëŠ” LocalStorageë§Œì„ ì´ìš©í•˜ì—¬ ë‹¤í¬ëª¨ë“œë¥¼ íŒë³„í•˜ê³  ìˆì§€ë§Œ ì¶”í›„ CSS ì†ì„±ì¸ `(prefers-color-scheme: dark)`ë¥¼ ì´ìš©í•´ ì¶”ê°€ë¡œ íŒë³„ í•´ë³´ì•„ì•¼ê² ë‹¤.
