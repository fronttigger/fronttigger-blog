---
title: Next.jsì—ì„œ MDXë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì—¬ì • #required
tags:
  - next.js
  - typescript
  - mdx
published: true # required
date: '2022. 2. 11' # required
description: 'ì™„ì„±í•˜ìë§ˆì ê·€ì‹ ê°™ì´ MDX 2ê°€ ë‚˜ì™”ë„¤? ğŸ˜ ' # required
thumbnailImg: '/thumbnail/2022/02/nextjs/nextjs-mdx.png' # required
---

## MDXë¥¼ ì‚¬ìš©í•˜ê²Œ ëœ ì´ìœ 

ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¡œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ìŠ¤í™ì„ ì •í•˜ë˜ ë„ì¤‘ [MDX](https://mdxjs.com/)ë¼ëŠ” **ì»´í¬ë„ŒíŠ¸**ì— ì¹œí™”ì ì¸ ë§ˆí¬ë‹¤ìš´ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•„ëƒˆë‹¤.

ì»´í¬ë„ŒíŠ¸ì— ì¹œí™”ì ì´ë€ ë§ì€ ì˜ˆìƒì´ ë˜ê² ì§€ë§Œ ì•„ë˜ì²˜ëŸ¼ **ë§ˆí¬ë‹¤ìš´**ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.

```javascript
import { Box, Heading } from 'rebass'

MDX using imported components!

<Box>
  <Heading>Hereâ€™s a heading</Heading>
</Box>
```

ë§ˆì¹¨ **Next.js**ë¥¼ ì´ìš©í•˜ì—¬ êµ¬í˜„í•  ì˜ˆì •ì´ì—ˆê¸° ë•Œë¬¸ì— ì´ë²ˆ ê¸°íšŒì— í•œ ë²ˆ ì‚¬ìš©í•´ë³´ê¸°ë¡œ í•˜ê³  ë³¸ê²©ì ì¸ ì¡°ì‚¬ì— ë“¤ì–´ê°”ë‹¤.

ì „ì²´ ì½”ë“œë¥¼ ì°¸ê³ í•˜ë ¤ë©´ [Blog Repository](https://github.com/copiest/fronttigger-blog)ì— ì½”ë“œë“¤ì´ ìˆë‹¤.

## MDX-Bundler

MDXì˜ ê³µì‹ë¬¸ì„œì™€ ì—¬ëŸ¬ê°€ì§€ ì•„í‹°í´ë“¤ì„ ì°¾ì•„ë³´ë˜ ì¤‘ ë¦¬ì•¡íŠ¸ í…ŒìŠ¤íŒ… íˆ´ì„ ë§Œë“œì‹  ì¼„íŠ¸ì•„ì €ì”¨ê°€ ë§Œë“  [MDX-Bundler](https://github.com/kentcdodds/mdx-bundler) ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ëˆˆì— ë“¤ì–´ì™”ë‹¤.

esbuildë¥¼ ì‚¬ìš©í•˜ì—¬ ë”ìš± ë¹ ë¥¸ ë¹Œë“œì™€ Next.jsì™€ì˜ í˜¸í™˜ì„±, ê·¸ë¦¬ê³  ì§€ì†ì ì¸ ì´ìŠˆ ê´€ë¦¬ì™€ ë¹µë¹µí•œ ìŠ¤í°ì„œë“¤ì´ ìˆì–´ ì§€ì†ì ìœ¼ë¡œ ì‚¬ìš©í•˜ê¸° êµ‰ì¥íˆ ì¢‹ì•„ë³´ì˜€ë‹¤. ë˜í•œ, ë¬¸ì„œí™”ê°€ ì¹œì ˆí•˜ê²Œ ë˜ì–´ìˆì–´ ë¬¸ì„œë¥¼ ë³´ë©´ì„œ ê¸ˆë°© êµ¬í˜„í•  ìˆ˜ ìˆì„ê±°ë¼ ìƒê°í–ˆë‹¤.

## ì„¤ì¹˜

```bash
npm install --save mdx-bundler esbuild
```

mdx-bundlerëŠ” `esbuild`ë¥¼ í†µí•´ì„œ ë¹Œë“œí•˜ê¸° ë•Œë¬¸ì— í•¨ê»˜ ì„¤ì¹˜í•˜ì§€ ì•Šìœ¼ë©´ ì¶”í›„ ë¹Œë“œì‹œì— ë¬¸ì œê°€ ìƒê¸´ë‹¤. (ì‹¤ìˆ˜ë¡œ ì„¤ì¹˜í•˜ì§€ ì•Šì•˜ë‹¤ê°€ í•˜ë£¨ì¢…ì¼ ì‚½ì§ˆí–ˆë˜ ê²½í—˜ì´ ìˆë‹¤.. ğŸ˜…)

### ì‚¬ìš©

mdx-bundlerì—ì„œ ì œê³µë˜ëŠ” ëª‡ê°€ì§€ í•¨ìˆ˜ë“¤ì´ ìˆë‹¤. ê·¸ ì¤‘ì— `bundleMdx`, `getMDXComponent`ë¥¼ í™œìš©í•˜ì—¬ êµ¬í˜„í•´ë³´ì•˜ë‹¤.

#### bundleMDX

bundleMDXëŠ” íŠ¹ì • mdx íŒŒì¼ì„ ë°›ì•„ì™€ mdxë¥¼ í™”ë©´ì— ê·¸ë ¤ì¤„ ìˆ˜ ìˆëŠ” ë°ì´í„°ë¥¼ ì œê³µí•´ì£¼ëŠ” ë¹„ë™ê¸° í•¨ìˆ˜ë‹¤.

ê°ì²´ë¥¼ ì¸ìë¡œ ê°€ì§€ê³  ê°€ëŠ”ë° ëŒ€í‘œì ìœ¼ë¡œ `source`ì™€ `cwd` ë‘ê°€ì§€ë‹¤.

**source**ëŠ” mdx íŒŒì¼ì„ `utf-8` í˜•íƒœë¡œ ì¸ì½”ë”©í•˜ì—¬ ë„˜ê²¨ì£¼ë©´ mdxì— ì‘ì„±í•œ ë‚´ìš©ì´ ì¶”í›„ `matter` í˜•íƒœë¡œ ë°˜í™˜ë˜ëŠ”ë° ì´ë¥¼ í†µí•´ í™”ë©´ì— mdxë¥¼ ê·¸ë ¤ì¤„ ìˆ˜ ìˆê²Œëœë‹¤.

**cwd**ëŠ” `ì‘ì—… ë””ë ‰í† ë¦¬`ë¥¼ ëª…ì‹œí•˜ëŠ”ë° ì—¬ê¸°ì„œ ë””ë ‰í† ë¦¬ë¥¼ ëª…ì‹œí•˜ë©´ **esbuild**ë¥¼ í†µí•´ importê°€ ê°€ëŠ¥í•´ì§„ë‹¤.

ì¦‰, mdxì—ì„œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” importë¥¼ í•´ì£¼ì–´ì•¼í•˜ê¸° ë•Œë¬¸ì— ë””ë ‰í† ë¦¬ë¥¼ ëª…ì‹œí•˜ì—¬ ë¹Œë“œë¥¼ í•´ì£¼ì–´ì•¼í•œë‹¤.

ë‚˜ì˜ ê²½ìš°ì—” ë¬´ë‚œí•˜ê²Œ ë£¨íŠ¸ ë””ë ‰í† ë¦¬ë¥¼ ëª…ì‹œí•´ì£¼ì—ˆë‹¤.

ê·¸ë ‡ê²Œ ë‘ê°€ì§€ë¥¼ ë„˜ê¸°ë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```javascript
const source = fs.readFileSync(path.join(`${POST_PATH}.mdx`), { encoding: 'utf-8' })

const {
  matter: { data, content },
  code,
} = await bundleMDX({
  source,
  cwd: process.cwd(),
})
```

ì´ë ‡ê²Œ ë‘ ê°’ì„ ë„˜ê¸°ë©´ ë‘ ê°€ì§€ ê°’ì„ ë°›ì„ ìˆ˜ ìˆì„ ìˆ˜ ìˆëŠ”ë° `matter`ì™€ `code`ë‹¤.

ì´ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” mdxì˜ í˜•íƒœë¥¼ ë§ì¶”ì–´ì£¼ì–´ì•¼ í•˜ëŠ”ë° í˜•íƒœëŠ” ì•„ë˜ì™€ ê°™ë‹¤.

```md
---
title: Next.jsì—ì„œ MDXë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì—¬ì • #required
tags:
  - next.js
  - typescript
  - mdx
published: true # required
date: '2022. 2. 11' # required
description: 'ì™„ì„±í•˜ìë§ˆì ê·€ì‹ ê°™ì´ MDX 2ê°€ ë‚˜ì™”ë„¤? ğŸ˜ ' # required
thumbnailImg: '/thumbnail/2022/02/nextjs/nextjs-mdx.png' # required
---

## MDXë¥¼ ì‚¬ìš©í•˜ê²Œ ëœ ì´ìœ 

ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¡œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ìŠ¤í™ì„ ì •í•˜ë˜ ë„ì¤‘ [MDX](https://mdxjs.com/)ë¼ëŠ” **ì»´í¬ë„ŒíŠ¸**ì— ì¹œí™”ì ì¸ ë§ˆí¬ë‹¤ìš´ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•„ëƒˆë‹¤.

ì»´í¬ë„ŒíŠ¸ì— ì¹œí™”ì ì´ë€ ë§ì€ ì˜ˆìƒì´ ë˜ê² ì§€ë§Œ ì•„ë˜ì²˜ëŸ¼ **ë§ˆí¬ë‹¤ìš´**ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.

...
```

ë³´ë©´ mdxì— ëŒ€í•œ **ì •ë³´**ë¥¼ ë‚˜íƒ€ë‚´ëŠ” ë¶€ë¶„ê³¼ **ë³¸ë¬¸**ìª½ìœ¼ë¡œ ë‚˜ë‰˜ê³  ìˆë‹¤.

ì´ ì „ì²´ì ì¸ ë¶€ë¶„ì€ `matter`ë¼ê³  í•˜ë©° ì—¬ê¸°ì„œ **data**ëŠ” ì •ë³´ì— ëŒ€í•œ ë°ì´í„°ë¥¼ JSONìœ¼ë¡œ, **content**ëŠ” ë³¸ë¬¸ ìª½ì´ ë¬¸ìì—´ë¡œ ì¶œë ¥ëœë‹¤.

**data**

```json
{
  "title": "Next.jsì—ì„œ MDXë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì—¬ì •",
  "tags": ["next.js", "typescript", "mdx"],
  "published": true,
  "date": "2022. 2. 11",
  "description": "ì™„ì„±í•˜ìë§ˆì ê·€ì‹ ê°™ì´ MDX 2ê°€ ë‚˜ì™”ë„¤? ğŸ˜ ",
  "thumbnailImg": "/thumbnail/2022/02/nextjs/nextjs-mdx.png"
}
```

**content**

```md
## MDXë¥¼ ì‚¬ìš©í•˜ê²Œ ëœ ì´ìœ 

ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ë¡œ ë¸”ë¡œê·¸ë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ìŠ¤í™ì„ ì •í•˜ë˜ ë„ì¤‘ [MDX](https://mdxjs.com/)ë¼ëŠ” **ì»´í¬ë„ŒíŠ¸**ì— ì¹œí™”ì ì¸ ë§ˆí¬ë‹¤ìš´ì´ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œì•„ëƒˆë‹¤.

ì»´í¬ë„ŒíŠ¸ì— ì¹œí™”ì ì´ë€ ë§ì€ ì˜ˆìƒì´ ë˜ê² ì§€ë§Œ ì•„ë˜ì²˜ëŸ¼ **ë§ˆí¬ë‹¤ìš´**ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì´ë‹¤.
```

ì—¬ê¸°ì„œ ë„˜ì–´ì˜¤ëŠ” ë¬¸ìì—´ì€ mdxì— ì‘ì„±í•œ ê·¸ ìì²´ì´ê¸° ë•Œë¬¸ì— ì¶”ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•´ì„œ ë‹¤ì‹œ ê°€ê³µí•˜ì§€ ì•ŠëŠ”ì´ìƒ ì‚¬ìš©í•˜ê¸° í˜ë“¤ì—ˆë‹¤.

ê·¸ë˜ì„œ í•¨ìˆ˜ì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ë¥¸ ê°’ì¸ **code**ë¥¼Â í™œìš©í•˜ëŠ” ë°©ë²•ì„ ì„ íƒí–ˆë‹¤.

#### getMDXComponent

ì´ í•¨ìˆ˜ëŠ” ë°©ê¸ˆ ë„˜ê²¨ë°›ì€ **code**ë¥¼ ì¸ìë¡œ ë°›ì•„ mdxì˜ **ë³¸ë¬¸**ì„ ìì²´ ì»´í¬ë„ŒíŠ¸í™” ì‹œì¼œì„œ ë°˜í™˜í•´ì¤€ë‹¤.

ë˜ `components`ë¼ëŠ” propsë¥¼ ë°›ëŠ”ë° ì´ëŠ” ë§ˆí¬ë‹¤ìš´ì— ì‚¬ìš©ë˜ëŠ” ì—¬ëŸ¬ê°€ì§€ ë¬¸ë²•ì— ëŒ€í•œ ì»¤ìŠ¤í…€í•œ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ì„ ì–¸í•˜ì—¬ ì£¼ì–´ ê·¸ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹¤ì œ ë°˜ì˜í•˜ì—¬ ê·¸ë ¤ì£¼ê¸° ë•Œë¬¸ì— êµ‰ì¥íˆ í¸ë¦¬í•˜ë‹¤.

ì¦‰, ìœ„ì— **content**ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  **code**ë¥¼ í†µí•´ í•œ ë²ˆì— í•´ê²°ì´ ê°€ëŠ¥í•œ ê²ƒì´ë‹¤.

```javascript
import { getMDXComponent } from 'mdx-bundler/client'

import MDXComponents from '#components/shared/MDX'

function PostDetail({ post, code }: { post: Post, code: string }) {
  const { title, date, description, tags, thumbnailImg } = post.frontMatter
  const Component = React.useMemo(() => getMDXComponent(code), [code])

  return (
    <>
      <PostSEO
        seo={{
          title,
          description,
          thumbnailImg,
          tags,
        }}
      />
      <section className={styles.container}>
        <h1 className={styles.title}>{title}</h1>
        <span className={styles.date}>{date}</span>
        <Component components={MDXComponents} />
      </section>
    </>
  )
}

export default PostDetail
```

ì½”ë“œë¥¼ ë³´ë©´ codeë¥¼ ë°›ì•„ ë°”ë¡œ ì»´í¬ë„ŒíŠ¸ë¡œ ê·¸ë ¤ì£¼ê³  ìˆë‹¤. ì €ë ‡ê²Œ ê·¸ë ¤ì£¼ë©´ ì•„ë˜ì™€ ê°™ì´ ê¸°ë³¸ì ì¸ ìŠ¤íƒ€ì¼ì„ ê°€ì§„ ë³¸ë¬¸ì„ ë±‰ì–´ë‚¼ ê²ƒì´ë‹¤.

![content](/images/2022/02/nextjs/content.png)

ì—¬ê¸°ì„œ ì¶”ê°€ì ìœ¼ë¡œ ìŠ¤íƒ€ì¼ë§ì´ í•„ìš”í•˜ë‹¤ë©´ mdxì—ì„œ ì œê³µí•˜ëŠ” [ê³µí†µ ì»´í¬ë„ŒíŠ¸](https://mdxjs.com/table-of-components/)ë¥¼ ë§Œë“¤ì–´ propsë¡œ ì „ë‹¬í•˜ë©´ ëœë‹¤.

### ê³µí†µ ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

ê³µí†µ ì»´í¬ë„ŒíŠ¸ì—ëŠ” ì—¬ëŸ¬ ì¢…ë¥˜ê°€ ìˆì§€ë§Œ ëŒ€í‘œì ìœ¼ë¡œ Hn, p, span, img, ol ë“±ì˜ íƒœê·¸ë“¤ì´ ìˆë‹¤.

ì € íƒœê·¸ë“¤ì— í•´ë‹¹ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ ê°ì²´í˜•íƒœë¡œ ì œê³µí•˜ë©´ ì „ë‹¬ ë°›ì€ propsì˜ ìŠ¤íƒ€ì¼ëŒ€ë¡œ ìë™ìœ¼ë¡œ ê·¸ë ¤ì¤€ë‹¤.

```javascript
import Code from './Code'
import Paragraph from './Paragraph'
// ...

export default {
  code: Code,
  p: Paragraph,
  // ...
}
```

ë¸”ë¡œê·¸ì—ì„œ ì‚¬ìš©ë  ì—¬ëŸ¬ê°€ì§€ì˜ íƒœê·¸ë“¤ì„ ë§Œë“¤ì—ˆê³  ì´ë¥¼ ê°ì²´í˜•íƒœë¡œ ë‚´ë³´ë‚´ì„œ ì‚¬ìš©í•˜ì˜€ë‹¤.

ëŒ€í‘œì ìœ¼ë¡œ í•˜ë‚˜ì˜ ì»´í¬ë„ŒíŠ¸ë¥¼ ì˜ˆë¥¼ë“¤ìë©´ ì•„ë˜ì™€ ê°™ë‹¤.

```javascript
import React from 'react'
import { Prism as SyntaxHighlighter } from 'react-syntax-highlighter'
import { vscDarkPlus } from 'react-syntax-highlighter/dist/cjs/styles/prism'

import { codeText, syntaxHighlighter } from './styles.css'

const Code = ({
  className,
  children,
}: React.DetailedHTMLProps<React.HTMLAttributes<HTMLElement>, HTMLElement>) => {
  if (!className) {
    return <code className={codeText}>{children}</code>
  }

  return (
    <SyntaxHighlighter language="javascript" style={vscDarkPlus} customStyle={syntaxHighlighter}>
      {children}
    </SyntaxHighlighter>
  )
}

export default Code
```

ì½”ë“œì— ìŠ¤íƒ€ì¼ì„ ì£¼ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì˜€ê³  code íƒœê·¸ì— ë§ëŠ” í˜•íƒœë¡œ ë°˜í™˜í•˜ë©´ ì™„ì„±ëœë‹¤.

ì´ë ‡ê²Œ ì—¬ëŸ¬ê°€ì§€ì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì„ ë§Œë“¤ê³  ë‹¤ì‹œ í™•ì¸í•˜ë©´

![mdx component](/images/2022/02/nextjs/mdx-component.png)

ìœ„ì™€ ê°™ì´ ìŠ¤íƒ€ì¼ì´ ì ìš©ëœ ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë‚  ìˆ˜ê°€ ìˆë‹¤!

ì§€ê¸ˆê¹Œì§€ ê¸€ì„ ì‘ì„±í•˜ë©´ì„œ ìƒê°ë³´ë‹¤ mdxì—ì„œ ì»´í¬ë„ŒíŠ¸ì˜ í™œìš©ë„ëŠ” ì ì—ˆì§€ë§Œ, ìë°”ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ êµ‰ì¥íˆ ì‹ ì„ í–ˆê³  ì´ì „ì—ëŠ” ì—¬ëŸ¬ê°€ì§€ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ì„œ ë¶ˆí¸í•˜ê²Œ ë§Œë“¤ì–´ì•¼í–ˆë‹¤ë©´ mdx-bundlerë¥¼ í†µí•´ì„œ ê°„í¸í•˜ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆë‹¤ëŠ” ì ì—ì„œ í¸í•˜ê³  ì¢‹ì•˜ë˜ ê²ƒ ê°™ë‹¤. ğŸ‘ğŸ‘
