---
title: Context API + useReducer ì¡°í•© ì‚´í´ë³´ê¸° (feat. Typescript) #required
tags:
  - typescript
  - react
  - contextAPI
  - useReducer
  - state
  - ìƒíƒœê´€ë¦¬
published: true # required
date: '2022. 1. 9' # required
description: 'ë¦¬ì•¡íŠ¸ ìƒíƒœê´€ë¦¬ ë§ê³  ë‚´ ìƒíƒœê´€ë¦¬ëŠ” ì–¸ì œí•˜ë‚˜' # required
thumbnailImg: '/thumbnail/2022/01/react/context-reducer.png' # required
---

## ìƒíƒœê´€ë¦¬?

ë¦¬ì•¡íŠ¸ ê°œë°œì„ í•  ë•Œ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë©´ ë¬´ìˆ˜íˆ ë§ì€ propsë“¤ê³¼ ì‹¸ìš°ë©° ê°œë°œì„ í•˜ê²Œ ëœë‹¤.. ğŸ˜¨

ê·¸ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ë§ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬(Redux, Recoil, Mobx ë“±)ë“¤ì´ ë“±ì¥í–ˆë‹¤.

ìœ„ì™€ ê°™ì€ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì´ë²ˆ ê¸°íšŒì— ê°„ë‹¨í•œ Todoë¥¼ êµ¬í˜„í•˜ë©° `Context API`ì™€ `useReducer` ì¡°í•©ì„ í†µí•´ ë²ˆê±°ë¡œìš´ **prop drilling** ì—†ì´ ìƒíƒœê´€ë¦¬ë¥¼ í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì— ëŒ€í•´ ì•Œì•„ë³´ì

## Context API

ë¨¼ì € [Context API](https://ko.reactjs.org/docs/context.html) ì˜ ê°œë…ì— ëŒ€í•´ ì•Œì•„ë³´ì!

ì¼ë‹¨, ê²°ë¡ ë¶€í„° ë§í•˜ìë©´ Context APIëŠ” **ìƒíƒœê´€ë¦¬**ë¥¼ í•˜ëŠ” ëª©ì ì´ ì•„ë‹ˆì—ˆë‹¤. ğŸ™…ğŸ»

Context APIê°€ Reduxì™€ ê°™ì€ ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ ëŒ€ìš©ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ì™€ ì˜ˆì‹œì˜ í•œ ê²½ìš°ë¡œ ìë¦¬ë§¤ê¹€ í•˜ì—¬ ìƒíƒœê´€ë¦¬ì˜ ì—­í• ì„ í•˜ëŠ” APIë¡œ ì´í•´ë¥¼ í•˜ê³  ìˆì„í…ë° (ë‚˜ ë˜í•œ ê·¸ë¬ë‹¤.. ğŸ˜…)

ë¦¬ì•¡íŠ¸ ê³µì‹ë¬¸ì„œì— ë”°ë¥´ë©´ ìƒê°ê³¼ëŠ” ë‹¤ë¥´ê²Œ ì „í˜€ ë‹¤ë¥¸ ë§ì´ ì í˜€ìˆë‹¤.

![Context API DOCS](/images/2022/01/react/contextreact.png)

ìœ„ ë§ì—ì„œ ê·¸ ì–´ë””ì—ë„ **ìƒíƒœê´€ë¦¬**ë¼ëŠ” ë§ì€ ì°¾ì•„ë³¼ ìˆ˜ê°€ ì—†ë‹¤.

ì—¬ê¸°ì„œ ë§í•˜ê³ ì í•˜ëŠ” ê²°ë¡ ì€ **ì¼ì¼ì´ propsë¥¼ ë„˜ê²¨ì£¼ì§€ ì•Šê³  ê³§ë°”ë¡œ ì œê³µ**í•˜ëŠ” ì—­í• ì„ í•˜ëŠ” ì¹œêµ¬ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

ì¦‰, êµ³ì´ ìƒíƒœê°€ ì•„ë‹ˆë”ë¼ë„ ë°ì´í„°(ê°’)ë¼ë©´ ë¬´ì—‡ì´ëŠ” propsë¥¼ ë„˜ê¸°ì§€ ì•Šê³ ë„ ì œê³µí•œë‹¤ëŠ” ê²ƒì´ë‹¤.

ë¦¬ì•¡íŠ¸ ê°œë°œì„ í•  ë•Œ Context APIë¥¼ ìƒíƒœê´€ë¦¬ì˜ ëª…ëª©ìœ¼ë¡œ ë§ì´ ì‚¬ìš©ë˜ê³  ìˆê¸° ë•Œë¬¸ì— ì´ëŸ° ì˜¤í•´ì— ì˜í•œ ì›Œë”©ì´ ìƒê²¨ë‚˜ í˜¼ë™ì„ ì¼ìœ¼í‚¤ëŠ” ê²ƒ ê°™ë‹¤.. ğŸ¤”

ê·¸ë ‡ë‹¤ë©´ Context APIë¡œ ìƒíƒœê´€ë¦¬ë¥¼ í•œë‹¤ëŠ”ê±´ ë¬´ìŠ¨ ì˜ë¯¸ì¼ê¹Œ?!

ë¦¬ì•¡íŠ¸ì—ì„œ ì œê³µí•˜ëŠ” í›…ì¸ [useState](https://ko.reactjs.org/docs/hooks-reference.html#usestate), [useReducer](https://ko.reactjs.org/docs/hooks-reference.html#usereducer)ë¥¼ í†µí•´ ì§ì ‘ ìƒíƒœê´€ë¦¬ë¥¼ í•˜ëŠ” **ìƒíƒœ**ê³¼ **í•¨ìˆ˜**ë“¤ì„ Context APIë¡œ prop drilling ì—†ì´ ì „ë‹¬í•  ë•Œ ìƒíƒœê´€ë¦¬ì˜ **ë°”ì§€ì‚¬ì¥**ì´ë¼ëŠ” ìë¦¬ë¥¼ ìˆ˜ì—¬í•˜ê²Œ ëœë‹¤.

ê·¸ ì´ìœ ëŠ” ê°œë…ì ìœ¼ë¡œëŠ” ìƒíƒœê´€ë¦¬ì˜ ì—­í• ì´ ì•„ë‹ˆë‚˜, useStateì™€ useReducerì˜ ìƒíƒœì™€ í•¨ìˆ˜ë“¤ì„ ì²˜ë¦¬í•˜ë‹ˆ ê°•ì œë¡œ ìƒíƒœê´€ë¦¬ì˜ ì—­í• ì„ í•˜ëŠ” ìë¦¬ì— ì•‰í˜€ë†“ì€ ëŠë‚Œì´ë¼ê³  ë³¼ ìˆ˜ ìˆë‹¤.

ì§„ì§œ ìƒíƒœê´€ë¦¬ëŠ” í˜„ì¬ ì˜ˆì œ ê¸°ì¤€ìœ¼ë¡œëŠ” useReducerê°€ í•˜ê³  ìˆëŠ” ì…ˆì´ë‹¤.

ì½”ë“œë¥¼ ë³´ë©´ì„œ ì–´ë–»ê²Œ í™œìš©ë˜ëŠ”ì§€ ì‚´í´ë³´ì!

```javascript
import React, { useReducer, createContext } from 'react'

interface DefaultValueState {
  id: number
  text: string
}

const defaultValue: DefaultValueState[] = []

type ActionType =
  | {
      type: 'ADD_TODO'
      text: string
    }
  | { type: 'DELETE_TODO'; id: number }

function reducer(state: DefaultValueState[], action: ActionType): DefaultValueState[] {
  switch (action.type) {
    case 'ADD_TODO': {
      return state.concat({
        id: new Date().getTime(),
        text: action.text,
      })
    }
    case 'DELETE_TODO': {
      return state.filter((todo) => todo.id !== action.id)
    }
  }
}

interface ContextType {
  todos: DefaultValueState[]
  addTodo: (text: string) => void
  deleteTodo: (todoId: number) => void
}

export const TodoContext = createContext<ContextType>({
  todos: defaultValue,
  addTodo: () => {},
  deleteTodo: () => {},
})

function TodoProvider({ children }: { children: React.ReactNode }) {
  const [state, dispatch] = useReducer(reducer, defaultValue)

  const addTodo = (text: string): void => {
    dispatch({ type: 'ADD_TODO', text })
  }

  const deleteTodo = (id: number): void => {
    dispatch({ type: 'DELETE_TODO', id })
  }

  return (
    <TodoContext.Provider
      value={{
        todos: state,
        addTodo,
        deleteTodo,
      }}
    >
      {children}
    </TodoContext.Provider>
  )
}

export default TodoProvider
```

ì»¨í…ìŠ¤íŠ¸ë¥¼ ìƒì„±í•  ë•Œ ê°€ì¥ ê¸°ë³¸ê°’ì„ ë„£ê²Œ ë˜ëŠ”ë°, ì´ë•Œ useReducerì—ì„œ ê´€ë¦¬í•  **ìƒíƒœ**ì™€ **í•¨ìˆ˜**ë¥¼ ê°€ì§€ê³  ìƒì„±í•˜ê²Œ ëœë‹¤.

ê·¸ë¦¬ê³  ì´ë ‡ê²Œ ìƒì„±ëœ ì»¨í…ìŠ¤íŠ¸ë¥¼ useReducerì—ì„œ ë³¸ê²©ì ìœ¼ë¡œ ìƒíƒœë¥¼ í•¸ë“¤ë§ í•˜ê²Œ ë˜ê³ , ê·¸ í•¨ìˆ˜ì™€ ê°±ì‹ ë  ìƒíƒœë¥¼ **children**ì—ê²Œ ë„˜ê²¨ì£¼ê²Œ ëœë‹¤.

ì´ë ‡ê²Œ ë˜ë©´ ìƒíƒœê´€ë¦¬ëŠ” TodoProvider ì»´í¬ë„ŒíŠ¸ì—ì„œ ì§„í–‰ì´ ë˜ì§€ë§Œ, ì´ëŠ” Context APIë¥¼ í†µí•´ ì „ì—­ìœ¼ë¡œ drilling í•´ì¤„ ìˆ˜ ìˆê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.

ê·¸ë ‡ë‹¤ë©´ ì´ê±¸ ì‚¬ìš©í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì˜ ëª¨ìŠµì€ ì–´ë–¨ê¹Œ?

### App.tsx

```javascript
import React from 'react'
import ReactDOM from 'react-dom'
import './index.css'
import App from './App'
import reportWebVitals from './reportWebVitals'

import TodoProvider from './components/todo/provider'

ReactDOM.render(
  <React.StrictMode>
    <TodoProvider>
      <App />
    </TodoProvider>
  </React.StrictMode>,
  document.getElementById('root'),
)

reportWebVitals()
```

Todoë¥¼ ê·¸ë ¤ë‚¼ ì»´í¬ë„ŒíŠ¸ì— ëŒ€í•´ì„œ ìƒìœ„ ì»´í¬ë„ŒíŠ¸ë¡œ ê°ì‹¸ì¤€ë‹¤.

### Input.tsx

```javascript
import React, { useContext, useState } from 'react'
import { TodoContext } from './provider'

function Input() {
  const { addTodo } = useContext(TodoContext)
  const [value, setValue] = useState('')

  const handleChangeInput = (e: React.ChangeEvent<HTMLInputElement>): void => {
    setValue(e.target.value)
  }

  const handleFormSubmit = (e: React.FormEvent<HTMLFormElement>): void => {
    e.preventDefault()
  }

  const handleClickButton = (): void => {
    addTodo(value)
    setValue('')
  }

  return (
    <form
      onSubmit={handleFormSubmit}
      style={{
        display: 'flex',
        justifyContent: 'space-between',
        width: 'inherit',
      }}
    >
      <input value={value} onChange={handleChangeInput} style={{ width: '80%' }} />
      <button type="button" onClick={handleClickButton}>
        ë“±ë¡
      </button>
    </form>
  )
}

export default Input
```

ê·¸ë¦¬ê³  ìì‹ ì»´í¬ë„ŒíŠ¸ì—ì„  **useContext** hookì„ í†µí•´ TodoProviderì—ì„œ drillingí•œ propsë¥¼ ë°”ë¡œ ì ‘ê·¼í•´ì„œ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ê²Œ ëœë‹¤.

**Input ì»´í¬ë„ŒíŠ¸**ì—ì„œëŠ” ë“±ë¡ì„ í•´ì£¼ëŠ” ì—­í• ì´ ìˆê¸° ë•Œë¬¸ì— reducer í•¨ìˆ˜ì—ì„œ **ADD_TODO** íƒ€ì…ì¸ dispatch í•¨ìˆ˜ë¥¼ ì‚¬ìš©í–ˆë‹¤.

### Â Todos.tsx

```javascript
import React, { useContext } from 'react'

import Item from './item'
import { TodoContext } from './provider'

function Todo() {
  const { todos } = useContext(TodoContext)

  return (
    <ul style={{ width: '100%', listStyleType: 'none', padding: 0 }}>
      {todos.map((todo) => (
        <Item key={todo.id} id={todo.id} text={todo.text} />
      ))}
    </ul>
  )
}

export default Todo
```

ì´ì œ ì¶”ê°€í•œ Todoë¥¼ ê·¸ë ¤ë‚´ì•¼ í•  ë•Œ todos ë¼ëŠ” ëª…ìœ¼ë¡œ ìƒíƒœë¥¼ ì£¼ì—ˆìœ¼ë‹ˆ í•´ë‹¹ ìƒíƒœë¥¼ ê°€ì ¸ì™€ ë Œë”ë§ì„ ì‹œì¼œì£¼ì—ˆë‹¤.

ìœ„ì™€ ë§ˆì°¬ê°€ì§€ë¡œ **DELETE_TODO**ì˜ dispatchë„ ì²˜ë¦¬í•´ì£¼ì—ˆë‹¤.

### Item.tsx

```javascript
import React, { useContext } from 'react'

import { TodoContext } from './provider'

function Item({ id, text }: { id: number, text: string }) {
  const { deleteTodo } = useContext(TodoContext)

  const handleDeleteTodo = () => {
    deleteTodo(id)
  }

  return (
    <li>
      <div style={{ display: 'flex', justifyContent: 'space-between' }}>
        <span>{text}</span>
        <button onClick={handleDeleteTodo}>ì‚­ì œ</button>
      </div>
    </li>
  )
}

export default Item
```

ì´ì²˜ëŸ¼ Context APIì™€ useReducer ì¡°í•©ì„ í†µí•´ props drilling ì—†ì´ ìƒíƒœê´€ë¦¬ë¥¼ í•´ë³´ì•˜ë‹¤.

ê³µì‹ ë¬¸ì„œë¥¼ ë³´ì§€ ì•Šì•˜ë‹¤ë©´ ì•Œ ìˆ˜ ì—†ëŠ” ê°œë…ì´ì–´ì„œ ê³µì‹ë¬¸ì„œë¥¼ ì½ì–´ë³´ëŠ” ê²ƒì´ ì œê³µí•˜ëŠ” APIì— ëŒ€í•œ ì˜ë¯¸ì™€ ëª©ì ì„ íŒŒì•…í•˜ëŠ” ê°€ì¥ ê¸°ì´ˆì ì´ê³  ì¤‘ìš”í•œ ë°©ë²•ì´ ì•„ë‹ê¹Œ ìƒê°ëœë‹¤. ğŸ“š
