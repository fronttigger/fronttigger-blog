---
title: íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ Assertion Functionsì„ í™œìš©í•´ íƒ€ì… ë³´ì¥í•˜ê¸° #required
tags:
  - typescript
  - assert
  - assertion function
  - type guard
published: true # required
date: '2022. 5. 7' # required
description: 'const ì•ìœ¼ë¡œ_í‰ìƒí• _ê²Œì„ = "íƒ€ì… ë””íœìŠ¤"' # required
thumbnailImg: '/thumbnail/2022/04/typescript/assertion-functions.png' # required
---

íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ë¥¼ í™œìš©í•´ ê°œë°œí•˜ë‹¤ ë³´ë©´ ê¸°ì¡´ ìë°”ìŠ¤í¬ë¦½íŠ¸ë§Œìœ¼ë¡œ ê°œë°œí•  ë•Œë³´ë‹¤ ì•ˆì •ì„±ì´ í™•ì‹¤íˆ ì¦ê°€í•˜ëŠ” ê²ƒì„ ëŠë‚€ë‹¤.

ì»´íŒŒì¼ ë‹¨ê³„ì™€ íƒ€ì…ì²´í‚¹ ë‹¨ê³„ì—ì„œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì—”ì§„ì´ ì–´ë ¨íˆ ì•Œì•„ì„œ íƒ€ì… ì¶”ë¡ ê³¼ ì²´í¬ë¥¼ í•´ì£¼ëŠ” ë•ë¶„ì— ìš°ë¦¬ëŠ” íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ê°€ ì‹œí‚¤ëŠ”ëŒ€ë¡œ ì¡°ê±´ë§Œ ë§ì¶”ì–´ ì¤€ë‹¤ë©´ í¸ì•ˆ- í•˜ê²Œ ê°œë°œì´ ê°€ëŠ¥í•˜ë‹¤. (ë¬¼ë¡  ë¶ˆí¸í•œ ì ë“¤ë„ ìˆì§€ë§Œ.. ğŸ˜‡)

í•˜ì§€ë§Œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ì˜ íƒ€ì…ì—ë„ í—ˆì ì´ ìˆë‹¤.
ë°”ë¡œ ë¶€ë¶„ì ìœ¼ë¡œ íƒ€ì… ë³´ì¥ì´ ì•ˆëœë‹¤ëŠ” ê²ƒì´ë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ë³´ì!

## ì¬ë¯¸ë‚œ í˜„ìƒ ë°œê²¬

```javascript
let nickname: null | string = 'fronttigger'

function whatIsNicknameType() {
  nickname // null | string

  if (nickname == null) {
    nickname // null
    return
  }

  nickname // string
}

if (nickname != null) {
  whatIsNicknameType()
}
```

ìœ„ ì½”ë“œë¥¼ ë³´ë©´ ë­”ê°€ ì„í•˜ë‹¤. ğŸ¤”

ë¶„ëª… whatIsNicknameType í•¨ìˆ˜ë¥¼ ì‹¤í–‰í•˜ëŠ” ì¡°ê±´ì€ nickname ë³€ìˆ˜ê°€ `null`ì´ ì•„ë‹ ë•Œ ì¸ë°, ë§‰ìƒ í•¨ìˆ˜ ë‚´ë¶€ì—ì„œì˜ ì²« ë²ˆì§¸ nicknameì€ nullê³¼ string íƒ€ì… ë‘ ê°œì˜ íƒ€ì…ì´ë‹¤.

ë­”ê°€ ì´ìƒí•˜ì§€ ì•Šì€ê°€?

ë°”ë¡œ ì´ëŸ° ë¶€ë¶„ì—ì„œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ëŠìŠ¨í•˜ê²Œ íƒ€ì…ì„ ê²€ì‚¬í•œë‹¤.

ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•´ Node.js ì—ì„œëŠ” `assert` ë¼ëŠ” í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œë‹¤.

## Node.js ì—ì„œëŠ”?

```typescript
const assert = require('assert')

function multiply(x, y) {
  assert(typeof x === 'number')
  assert(typeof y === 'number')

  return x * y // number * number
}

multiply(2, 2) // 4
multiply(3, '1')
// AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value: assert(typeof y === 'number')
```

assertë¥¼ í†µí•´ íŠ¹ì • íƒ€ì…ì„ ë‹¨ì–¸ì„ ì‹œí‚¨ í›„ ë°˜í™˜ ê°’ì„ ê°•ì œí–ˆë‹¤.

ë§Œì•½ ë‹¨ì–¸í•œ ê°’ì´ ë“¤ì–´ì˜¤ì§€ ì•Šì„ ê²½ìš°Â **AssertionError**ë¥¼ ë˜ì ¸ë‚¸ë‹¤.

ì´ì— ê´€í•œ ì‚¬í•­ì€ [íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ 3.7](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-3-7.html#assertion-functions)ì— ê³µì‹ì ìœ¼ë¡œ ëª…ì‹œê°€ ë˜ì–´ìˆë‹¤.

ê·¸ë˜ì„œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ëŠ” ìœ„ì™€ ê°™ì€ í˜„ìƒì„ í•´ê²°í•˜ê¸° ìœ„í•´ `assertion signatures`ë¥¼ ë„ì…í•˜ì˜€ê³  ì´ë¥¼ í†µí•´ Node.jsì—ì„œ ì‚¬ìš©í•˜ë˜ ë°©ì‹ì²˜ëŸ¼ ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.

í•œ ë²ˆ ë§Œë“¤ì–´ë³´ì!

## assert function êµ¬í˜„

```typescript
export default function assert(condition: unknown, errorMessage?: string): asserts condition {
  if (!condition) {
    throw new Error(errorMessage || 'condition ì¡°ê±´ì´ trueê°€ ì•„ë‹™ë‹ˆë‹¤.')
  }
}
```

í•¨ìˆ˜ì˜ íƒ€ì…ì— `asserts` í‚¤ì›Œë“œê°€ ë“¤ì–´ê°”ë‹¤.

ê·¸ë¦¬ê³  assertsëŠ” íƒ€ì…ì„ ë³´ì¥í•˜ê¸° ìœ„í•œ ì¸ìë¥¼ ê°€ì§„ë‹¤. (ì—¬ê¸°ì„œëŠ” condition)

ì´ë ‡ê²Œ ë˜ë©´ ì…ë ¥ë°›ì€ conditionì´ **true**ì¸ ê²½ìš° ì¡°ê±´ì´ í¬í•¨í•˜ëŠ” ë²”ìœ„ì˜ ë‚˜ë¨¸ì§€ ë¶€ë¶„ì— ëŒ€í•œ íƒ€ì…ì„ ë³´ì¥ë°›ëŠ”ë‹¤.

## assert function ì‚¬ìš©

```typescript
function getNickname(name: string | null): string {
  assert(name != null) // true

  return name // string
}

getNickname('fronttigger') // fronttigger
```

ìœ„ì—ì„œ ë§Œë“  assert í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•œ ê°„ë‹¨í•œ í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ë³´ì•˜ë‹¤.

ì—¬ê¸°ì„œ name ì¸ìë¡œ ë„˜ì–´ì˜¨ ê°’ì´ 'fronttigger' ë¬¸ìì—´ì´ë¯€ë¡œ trueê°€ ë˜ì–´ Errorì„ throw í•˜ì§€ ì•ŠëŠ”ë‹¤.

ì›ë˜ëŠ” ë‚´ë¶€ì—ì„œ ëŠìŠ¨í•œ íƒ€ì…ì²´í¬ë¡œ ì¸í•´ null í™•ì¸ì„ ì¶”ê°€ë¡œ í•´ì¤˜ì•¼í•˜ëŠ” ë²ˆê±°ë¡œì›€ì´ ìˆì—ˆì§€ë§Œ, ì´ì œ ê·¸ëŸ´ í•„ìš” ì—†ì´ assert í•¨ìˆ˜ë¥¼ true ì¡°ê±´ìœ¼ë¡œë§Œ ë§ì¶”ì–´ì¤€ë‹¤ë©´ ê·¸ ë‹¤ìŒ ë¶€í„°ëŠ” trueì— ëŒ€í•œ íƒ€ì…ì´ ë³´ì¥ë°›ê²Œ ëœë‹¤. ğŸ‘

ì´ëŸ° íƒ€ì… ê°€ë“œ í•¨ìˆ˜ë“¤ì„ í†µí•´ ë³´ë‹¤ ì•ˆì „í•˜ê³  ê¹”ë”í•œ íƒ€ì…ìŠ¤í¬ë¦½íŠ¸ ì½”ë”©ì´ ê°€ëŠ¥í•˜ë‹¤! ğŸ’»
