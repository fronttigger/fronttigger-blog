---
title: ì˜µì €ë²„ íŒ¨í„´ì„ í™œìš©í•˜ì—¬ ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œ ë Œë”ë§ í•´ë³´ê¸° #required
tags:
  - javascript
  - observer pattern
  - design pattern
published: true # required
date: '2020. 9. 9' # required
description: 'ë°°ê²½ì§€ì‹ì€ ìŠ¤íƒ€í¬ë˜í”„íŠ¸' # required
thumbnailImg: '/thumbnail/2020/09/javascript/observer.jpeg' # required
---

## ì˜µì €ë²„ íŒ¨í„´

`ì˜µì €ë²„ íŒ¨í„´`ì€ ë””ìì¸ íŒ¨í„´ì¤‘ì— í•˜ë‚˜ë¡œì„œ ìŠ¤íƒ€í¬ë˜í”„íŠ¸ì˜ ì˜µì €ë²„ ì²˜ëŸ¼ **ê´€ì°°**ì„ í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤. ê·¸ ê´€ì°°í•œ ê²°ê³¼ë¥¼ ë³¸ì§„(ë„¥ì„œìŠ¤)ì—ì„œ ê´€ë¦¬í•˜ì—¬ ë‹¤ìŒ í–‰ë™ì„ ê²°ì •í•˜ê³  ìˆ˜í–‰í•œë‹¤.

í”„ë¡œê·¸ë˜ë°ì—ì„œë„ ë™ì¼í•˜ë‹¤.

ì˜µì €ë²„ë¥¼ ê°€ì§€ê³  ìˆëŠ”(ìƒì†ë°›ëŠ”) **ê°ì²´**ëŠ” í•­ìƒ ê´€ì°°ì„ ë‹¹í•˜ê³  ìˆìœ¼ë©°, lifecycleì„ ê°ì§€í•˜ì—¬ í•´ë‹¹ **ì •ë³´(ë°ì´í„°, í–‰ë™)ë¥¼ ë³¸ì²´ì—ê²Œ ë„˜ê²¨ ê´€ë¦¬**ë¥¼ ì‹œí‚¤ê²Œ ëœë‹¤.

ë§Œì•½ ì´ëŸ° ë””ìì¸íŒ¨í„´ì„ ì‚¬ìš©í•˜ì§€ ì•Šê³  ì¼ë°˜ì ìœ¼ë¡œ êµ¬í˜„ì„ í•˜ê²Œ ëœë‹¤ë©´ ê°ê°ì˜ ê°ì²´ë³„ë¡œ ë³€ìˆ˜ì™€ ë©”ì†Œë“œë¥¼ ê´€ë¦¬í•˜ê²Œ ë  ê²ƒì´ê³ , ì´ëŠ” ê°€ë…ì„±ì´ ë–¨ì–´ì§€ëŠ” ì½”ë“œì™€ ì¬ì‚¬ìš©ì„±ì´ ì—†ëŠ” ê°ì²´ë“¤ì´ ê³„ì† ìƒê²¨ë‚  ê²ƒì´ë‹¤.

ê·¸ë˜ì„œ ì˜µì €ë²„ íŒ¨í„´ì„ í™œìš©í•˜ì—¬ ì¸ìŠ¤íƒ€ê·¸ë¨ í”¼ë“œ ë¶€ë¶„ì„ ë§Œë“¤ì–´ë³´ë©° í•™ìŠµí•´ë³´ë ¤ê³  í•œë‹¤.

### Subject (ì „ì—­, ë³¸ì²´)

```javascript
class Subject {
  observerCollection = []

  constructor() {
    this.app = document.getElementById('app')
  }

  render() {
    this.app.innerHTML += this.observerCollection.map((component) => component.render()).join('')
  }

  registration(observer) {
    this.observerCollection.push(observer)
  }
}

const subject = new Subject()

module.exports = { Subject, subject }
```

SubjectëŠ” ì „ì—­ ê°ì²´ë¡œì¨ íŠ¸ë¦¬êµ¬ì¡°ì˜ **ê°€ì¥ ìµœìƒë‹¨**ì„ ê´€ë¦¬í•œë‹¤.

ê·¸ë¦¬ê³  ë“±ë¡ëœ **ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸**(ì—¬ê¸°ì„  í”¼ë“œ ê°ì²´ í•˜ë‚˜)ë¥¼ ë°˜ë³µí•˜ë©° renderë¥¼ í•´ì£¼ëŠ” ë©”ì†Œë“œë¥¼ ë§Œë“¤ì—ˆë‹¤.

ìµœì´ˆ 1íšŒë§Œ ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ì•¼ í•˜ê¸° ë•Œë¬¸ì— ìƒì„±í•œ ê°ì²´ë¥¼ ë‚´ë³´ë‚´ì¤€ë‹¤.

ì´ ê°ì²´ì—ì„œëŠ” ë§ ê·¸ëŒ€ë¡œ **ì „ì—­ì„ ê´€ë¦¬**í•˜ëŠ” ë„¥ì„œìŠ¤ë¼ê³  ë³´ë©´ ëœë‹¤. ë„¥ì„œìŠ¤ì—ì„œ ì˜µì €ë²„ì˜ ì •ë³´ë¥¼ ë°›ì•„ì™€ ë‹¤ìŒ í–‰ë™ì„ íŒë‹¨í•˜ê³  ìˆ˜í–‰í•˜ë“¯ì´ ì—¬ê¸°ì„œ ê´€ì°°í•œ ê°ì²´ë¥¼ íŒë‹¨í•´ì„œ ë“±ë¡í•˜ê³ , ìµœì¢…ì ìœ¼ë¡  ë Œë”í•´ì£¼ëŠ” ì—­í• ì„ ìˆ˜í–‰í•œë‹¤.

### Observable (ê´€ì°°, ì˜µì €ë²„)

```javascript
const { subject } = require('./Subject')

class Observable {
  registration(target) {
    if (target) {
      subject.registration(target)
    }
  }
}

module.exports = Observable
```

ì´ ê°ì²´ì˜ ëœ»ì€ **ê´€ì°° ê°€ëŠ¥í•œ ê²ƒ**ì„ ë§í•œë‹¤. ì¦‰, ì´ ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆê²Œ ë˜ë©´ ê´€ì°°ë˜ê³  ìˆëŠ” ëŒ€ìƒì´ ë˜ëŠ” ê²ƒì´ë‹¤.

ê·¸ëŸ¬ë©´ ê·¸ ëŒ€ìƒì€ í•­ìƒ ì „ì—­ì—ì„œ ê´€ë¦¬ê°€ ë˜ì–´ì•¼ í•˜ë‹ˆ ì´ì „ì— ìƒì„±í•œ subject ê°ì²´ë¥¼ ê°€ì§€ê³  ìˆì–´ì•¼ í•  ê²ƒì´ê³ , ë§Œì•½ ìµœìƒë‹¨ì˜ ì»´í¬ë„ŒíŠ¸ê°€ ìˆë‹¤ë©´ ì „ì—­ì—ì„œ ê´€ë¦¬í•  ì»´í¬ë„ŒíŠ¸ ëŒ€ìƒì´ê¸° ë•Œë¬¸ì— ì¶”ê°€ë¥¼ í•´ì£¼ì–´ì•¼ í•œë‹¤.

### Component (ì»´í¬ë„ŒíŠ¸, ëŒ€ìƒ)

```javascript
const Observable = require('./Observable')

class Component extends Observable {
  components = []

  constructor(parent) {
    super()
    super.registration(!parent ? this : null)
    if (parent) {
      parent.addChild(this)
    }
  }

  addChild(child) {
    this.components.push(child)
  }
}

module.exports = Component
```

ì»´í¬ë„ŒíŠ¸ì—ì„œëŠ” í•­ìƒ ê´€ì°°ì˜ ëŒ€ìƒì´ ë˜ê³  í–‰ë™ì„ ê°ì‹œë‹¹í•  ìˆ˜ ìˆë„ë¡ í•˜ê¸° ìœ„í•´ Observableì„ ìƒì†ë°›ëŠ”ë‹¤.

ì—¬ê¸°ì„œëŠ” í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ê°€ íŠ¸ë¦¬ì˜ ìµœìƒìœ„ì¸ì§€ ì•„ë‹Œì§€ë¥¼ íŒë³„í•˜ì—¬ ë§Œì•½ ìµœìƒìœ„ë¼ë©´ í•´ë‹¹ ì»´í¬ë„ŒíŠ¸ë¥¼ ì „ì—­ì— ë“±ë¡í•˜ê³ , ì•„ë‹ˆë©´ ë¶€ëª¨ì˜ ìì‹ ì»´í¬ë„ŒíŠ¸ë¡œ ë„£ì–´ì£¼ëŠ” ì—­í• ì„ ë‹´ë‹¹í•œë‹¤.

ì´ì œ ìœ„ ì„¸ê°€ì§€ë¥¼ í™œìš©í•œ ì‹¤ì œ ë Œë”ë˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ ì°¨ë¡€ë‹¤.
ì´ ì»´í¬ë„ŒíŠ¸ë“¤ì€ í•­ìƒ ê´€ì°°ë˜ì–´ì•¼ í•˜ë‹ˆ **Component**ë¥¼ ìƒì†ë°›ì•„ ë¶€ëª¨ê°ì²´ì˜ ì—¬ë¶€ë¥¼ ì„ ì–¸í•´ì£¼ì–´ ì°¨í›„ ë Œë”ë§ì— ì‚¬ìš©ëœë‹¤.

### Feed

```javascript
const Component = require('./lib/Component')

class Feed extends Component {
  constructor() {
    super()
  }

  render() {
    return `<article class="feed">${this.components
      .map((component) => component.render())
      .join('')}</article>`
  }
}

module.exports = Feed
```

Feed ì»´í¬ë„ŒíŠ¸ëŠ” **ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸**(ë¶€ëª¨)ì´ë¯€ë¡œ ë”°ë¡œ parentë¥¼ ë„˜ê¸°ì§€ ì•Šì•˜ë‹¤.
ê·¸ë ‡ë‹¤ë©´ subjectì—ì„œ ê´€ë¦¬ê°€ ë˜ëŠ” ëŒ€ìƒì´ê³  ì»´í¬ë„ŒíŠ¸ ê°ì²´ì— ìì‹ë“¤ì´ ë“±ë¡ì´ ë  ê²ƒì´ê¸° ë•Œë¬¸ì— thisë¡œ ê°ì‹œí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ì— ì ‘ê·¼í•˜ì—¬ ìì‹ë“¤ì„ ë Œë”ë§í•´ì¤€ë‹¤.

### Header

```javascript
const Component = require('./lib/Component')

class Header extends Component {
  constructor(parent, thumbnail, nickname) {
    super(parent)
    this.thumbnail = thumbnail
    this.nickname = nickname
  }

  render() {
    return `
    <header class="feed-header">
      <div class="user-profile">
        <a class="thumbnail" href="">
          <img src="${this.thumbnail}" alt="userthumbnail" />
        </a>
        <a class="nickname" href="">
          <span>${this.nickname}</span>
        </a>
      </div>
      <div class="user-tab">
        <button type="button">
          <img src="../src/images/more.png" alt="" />
        </button>
      </div>
    </header>
    `
  }
}

module.exports = Header
```

HeaderëŠ” ê°ê°ì˜ í”¼ë“œ ì•ˆì— ìµœìƒë‹¨ì— ìœ„ì¹˜í•˜ì—¬ ì¸ë„¤ì¼ê³¼ ë‹‰ë„¤ì„ì„ í‘œì‹œí•´ì¤€ë‹¤.

ê·¸ë˜ì„œ parentë¥¼ ë°›ê³  Feedì˜ ìì‹ìœ¼ë¡œ ë“±ë¡ì´ ëœë‹¤.

### Picture

```javascript
const Component = require('./lib/Component')

class Picture extends Component {
  constructor(parent, pictures) {
    super(parent)
    this.pictures = pictures
  }

  render() {
    return `
      <div class="main-pictures">
        <ul class="pictures">
            ${this.pictures.map(
              (picture) =>
                `
              <li class="picture">
                <img src="${picture.picture}" alt="" />
              </li>
              `,
            )}
        </ul>
      </div>
      `
  }
}

module.exports = Picture
```

PictureëŠ” ë©”ì¸ ì‚¬ì§„ì´ ì˜¬ë¼ì˜¤ëŠ” ë¶€ë¶„ìœ¼ë¡œ ë§ˆì°¬ê°€ì§€ë¡œ Feedë¥¼ ë¶€ëª¨ë¡œ ê°€ì§€ê³  ìˆê¸° ë•Œë¬¸ì— parentë¥¼ ê°€ì§€ê³  ìˆë‹¤.

### Detail

```javascript
const Component = require('./lib/Component')

class Detail extends Component {
  constructor(parent, nickname, likes, content, comments, date) {
    super(parent)
    this.nickname = nickname
    this.likes = likes
    this.content = content
    this.comments = comments
    this.date = date
  }

  render() {
    return `
      <div class="feed-detail">
      <div class="feed-info">
        <div class="tabs">
          <div class="left-tab">
            <span class="like">
              <img src="../src/images/heart.png" alt="" />
            </span>
            <span class="comment">
              <img src="../src/images/comment.png" alt="" />
            </span>
            <span class="share">
              <img src="../src/images/share.png" alt="" />
            </span>
          </div>
          <div class="right-tab">
            <span class="pictures-length"></span>
            <span class="save">
              <img src="../src/images/save.png" alt="" />
            </span>
          </div>
        </div>
        <div class="likes">
          <button type="button">
            ì¢‹ì•„ìš”
            <span class="likes-length">${this.likes.length}</span>
          </button>
        </div>
        <div class="contents">
          <span class="nickname">${this.nickname}</span>
          <span class="content"
            >${this.content}</span
          >
          <span class="more">
            <button type="button">ë”ë³´ê¸°</button>
          </span>
        </div>
        <div class="comments">
          <a class="comments-length" href="">
            <span>ëŒ“ê¸€ ${this.comments.length}ê°œ ëª¨ë‘ ë³´ê¸°</span>
          </a>
          <ul class="comment-lists">
          ${this.comments
            .map(
              (comment) =>
                `
              <li class="list">
                <div class="comment-info">
                  <span class="nickname">
                    <a href="">${comment.nickname}</a>
                  </span>
                  <span class="list">${comment.comment}</span>
                </div>
              </li>
              `,
            )
            .join('')}
          </ul>
          <div class="since">
            <a href="">
              <span>${this.date}</span>
            </a>
          </div>
        </div>
      </div>
    </div>
    <div class="comment-area">
      <form action="POST">
        <textarea class="text-comment" placeholder="ëŒ“ê¸€ ë‹¬ê¸°..."></textarea>
        <button type="button">ê²Œì‹œ</button>
      </form>
    </div>
      `
  }
}

module.exports = Detail
```

Detailì€ ê¸€ì˜ ë‚´ìš©ë¶€í„° ëŒ“ê¸€, ëŒ“ê¸€ ë“±ë¡ ë“± ê²Œì‹œê¸€ì— ëŒ€í•œ ì„¸ë¶€ ì •ë³´ë“¤ì´ ë‹¤ ë“¤ì–´ìˆë‹¤.
ë§ˆì°¬ê°€ì§€ë¡œ Feedì— í¬í•¨ë˜ëŠ” ë‚´ìš©ì´ê¸° ë•Œë¬¸ì— parentë¥¼ ê°€ì§€ê³  ìˆë‹¤.

ì ì´ì œ ì»´í¬ë„ŒíŠ¸ë¥¼ ì‹¤ì œë¡œ ì¸ìŠ¤í„´ìŠ¤í™” í•˜ì—¬ ì‚¬ìš©í•´ë³´ì

### Index

```javascript
const datas = require('./data.json')
const { subject } = require('./src/lib/Subject')

const Feed = require('./src/Feed')
const Header = require('./src/Header')
const Picture = require('./src/Picture')
const Detail = require('./src/Detail')

datas.forEach((data) => {
  const feed = new Feed()
  new Header(feed, data.thumbnail, data.nickname)
  new Picture(feed, data.pictures)
  new Detail(feed, data.nickname, data.likes, data.content, data.comments, data.date)
})

subject.render()
```

íŠ¹ì • ë°ì´í„°ë“¤ì„ ë°›ì•„ì™€ ë°˜ë³µí•˜ë©´ì„œ ê°€ì¥ ìµœìƒìœ„ ê°ì²´ì¸ Feedë¥¼ ìƒì„±í•œë‹¤.

ê·¸ë¦¬ê³  ë‚˜ë¨¸ì§€ ì»´í¬ë„ŒíŠ¸ë“¤ì€ Feedì˜ ìì‹ì´ë‹ˆ ì¸ìŠ¤í„´ìŠ¤í™”ë¥¼ í•˜ë©´ì„œ ë¶€ëª¨ì¸ feedë¥¼ ê°€ì ¸ì™€ í•¨ê»˜ ìƒì„±í•´ì¤€ë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ ì „ì—­ì— ë“±ë¡ëœ Feedë¥¼ ë Œë”ë§í•œë‹¤.

### ê²°ê³¼

![observer response](/images/2020/09/javascript/observer-response.png)

ì „ì—­ì—ì„œëŠ” ì´ 2ê°œì˜ Feedê°€ ë“±ë¡ë˜ì—ˆìœ¼ë©°, ìì‹ ì»´í¬ë„ŒíŠ¸ëŠ” ì˜ë„ëœë°”ì™€ ê°™ì´ ì„¸ ì»´í¬ë„ŒíŠ¸ê°€ ì •ìƒì ìœ¼ë¡œ ë“±ë¡ëœ ê²ƒì„ ì½˜ì†”ë¡œ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

![observer result](/images/2020/09/javascript/observer-result.png)

ë Œë”ë§ ë˜í•œ ì•„ì£¼ ì˜ ë˜ì—ˆë‹¤! ğŸ‘

ì´ë ‡ê²Œ ê°ê°ì˜ ì»´í¬ë„ŒíŠ¸ë“¤ì„ í•­ìƒ ê´€ì°°í•˜ë©° ì»´í¬ë„ŒíŠ¸ë¥¼ í™œìš©í•  ìˆ˜ ìˆë‹¤.
ì˜µì €ë²„ íŒ¨í„´ì˜ ë‹¨ì ì¸ ì»´í¬ë„ŒíŠ¸ê°€ ë„ˆë¬´ ë§ì•„ ë³µì¡í•´ì§€ëŠ” ê²ƒì„ íŠ¸ë¦¬êµ¬ì¡°ë¡œ ê·¹ë³µí•˜ì—¬ ë³´ë‹¤ ë‚˜ì€ ì¬ì‚¬ìš©ì„±ê³¼ ê°€ë…ì„±ì„ ê°€ì ¸ì˜¬ ìˆ˜ ìˆì—ˆë‹¤.
